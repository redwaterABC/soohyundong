<!DOCTYPE html>
<html lang="kr">
<head>
  <link rel="icon" href="favicon.png" type="image/png" sizes="512x512">
  <link rel="apple-touch-icon" href="favicon.png">
<meta charset="UTF-8">
<title>3D 하자 스캔 뷰어</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: white;
  }
  #startScreen, #loadingScreen, #viewerScreen {
    display: none;
    flex-direction: column;
    align-items: center;
  }
  #startScreen {
    display: flex;
  }
  button {
    padding: 14px 25px;
    font-size: 18px;
    background: #00b7ff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  #loadingBarContainer {
    width: 280px;
    height: 20px;
    border: 2px solid white;
    margin-top: 20px;
  }
  #loadingBar {
    width: 0%;
    height: 100%;
    background: #00ff88;
  }
  model-viewer {
    width: 100vw;
    height: 100vh;
  }

  /* ▼▼ 3D 핫스팟 동그라미 아이콘 추가 ▼▼ */
  .hotspot {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: 3px solid #00c3ff;
    background: rgba(0, 195, 255, 0.45);
    cursor: pointer;
    padding: 0;
    display: block;
    color: transparent; /* ● 글자 숨기기 */
    outline: none;
  }
  .hotspot:hover {
    transform: scale(1.15);
    background: rgba(0, 255, 255, 0.65);
    transition: 0.15s;
  }
  /* ▲▲ 핫스팟 아이콘 끝 ▲▲ */

  /* 팝업 */
  #popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,0.9);
    border-radius: 10px;
    padding: 20px;
    width: 300px;
    display: none;
    text-align: center;
  }
  #popup img {
    width: 100%;
    border-radius: 6px;
  }
  #popup button {
    margin-top: 12px;
    background: #ff4444;
  }
</style>

<!-- model-viewer -->
<script type="module"
  src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
</script>
</head>

<body>

<!-- 시작 화면 -->
<div id="startScreen">
  <h2>건축관 3D 스캔 시작</h2>
  <button onclick="beginLoading()">스캔하기</button>
</div>

<!-- 로딩 화면 -->
<div id="loadingScreen">
  <h3>스캔 중...</h3>
  <div id="loadingBarContainer">
    <div id="loadingBar"></div>
  </div>
</div>

<!-- 3D 뷰어 -->
<div id="viewerScreen">
  <model-viewer src="model-crack.glb"
    camera-controls auto-rotate exposure="1.1" environment-image="neutral">

    <!-- 핫스팟 -->
    <button slot="hotspot-1" data-position="-5.4 1 -7" class="hotspot"
      onclick="showPopup('a.jpg', '벽 균열')"></button>
    <button slot="hotspot-2" data-position="3.6 -0.5 -0.1" class="hotspot"
      onclick="showPopup('b.jpg', '벽 누수 의심')"></button>
    <button slot="hotspot-3" data-position="3.6 0.7 4.2" class="hotspot"
      onclick="showPopup('c.jpg', '벽 크랙 이상')"></button>
    <button slot="hotspot-4" data-position="-5.4 0 2.2" class="hotspot"
      onclick="showPopup('d.jpg', '황현동')"></button>

  </model-viewer>
</div>

<!-- 팝업 -->
<div id="popup">
  <img id="popupImage">
  <p id="popupText"></p>
  <button onclick="hidePopup()">닫기</button>
</div>

<script>
function beginLoading() {
  document.getElementById("startScreen").style.display = "none";
  document.getElementById("loadingScreen").style.display = "flex";
  let bar = document.getElementById("loadingBar");
  let width = 0;
  let timer = setInterval(() => {
    width += 2;
    bar.style.width = width + "%";
    if (width >= 100) {
      clearInterval(timer);
      document.getElementById("loadingScreen").style.display = "none";
      document.getElementById("viewerScreen").style.display = "flex";
    }
  }, 40);
}

function showPopup(img, text) {
  document.getElementById("popupImage").src = img;
  document.getElementById("popupText").innerText = text;
  document.getElementById("popup").style.display = "block";
}

function hidePopup() {
  document.getElementById("popup").style.display = "none";
}
</script>

</body>
</html>
















